{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["// Перевірка підтримки локального сховища перед використанням\nif (typeof localStorage !== 'undefined') {\n  //Оголошено обєкт formData\n  const formData = { email: '', message: '' };\n\n  //Оголошено ключ для зберігання даних у локальному сховищі\n  const localStorageKey = 'feedback-form-state';\n\n  //Отримано доступ до форми\n  const feedbackFormEL = document.querySelector('.feedback-form');\n\n  console.log(feedbackFormEL.elements);\n\n  //Прослуховуємо подію 'input' на формі та викликаємо функцію\n  feedbackFormEL.addEventListener('input', () => {\n    //Присвоюємо значення ключам обєкта formData, і викликаємо метод trim() щоб не було пробілів по краях\n    const userEmail = feedbackFormEL.elements.email.value.trim();\n    const userMessage = feedbackFormEL.elements.message.value.trim();\n\n    formData.email = userEmail;\n    formData.message = userMessage;\n    //Викеликаємо функцію storageFormData в яку передаєм першим аргументом ключ для зберігання даних у локальному сховищі і другим аргументом передає обєкт з ключами та їх значенями\n    storageFormData(localStorageKey, formData);\n  });\n\n  //Оголошуємо функцію яка перетворює JavaScript об'єкт у JSON\n  function storageFormData(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n\n  // Оголошуємо функцію для обробки події надсилання форми\n  function handleSubmit(event) {\n    const email = feedbackFormEL.elements.email.value;\n    const message = feedbackFormEL.elements.message.value;\n\n    //Перевіряємо чи заповнені поля форми\n    if (email === '' || message === '') {\n      alert('Fill please all fields');\n      //Відміняємо поведінку браузера за замовчуванням\n      event.preventDefault();\n    } else {\n      event.preventDefault();\n      //Виводимо в консоль обєкт з його значеннями і розпаршуємо(перетворюємо) його з JSON в JavaScript\n      console.log(JSON.parse(localStorage.getItem(localStorageKey)));\n\n      //Очищуємо збережене значення ключа в localStorage\n      localStorage.removeItem(localStorageKey);\n\n      //Очищуємо форму\n      feedbackFormEL.reset();\n    }\n  }\n\n  // //Прослуховуємо подію 'submit' на формі та викликаємо функцію handleSubmit\n  feedbackFormEL.addEventListener('submit', handleSubmit);\n\n  //Оголошуємо функцію яка буде отримувати дані з локального сховища браузера за ключем і повертати ці дані у вигляді об'єкта JavaScript. Якщо дані відсутні або не можуть бути розібрані як JSON, функція виводить інформацію про помилку в консоль і повертає null.\n  function errorData(key = 'empty') {\n    const data = localStorage.getItem(key);\n    try {\n      return JSON.parse(data);\n    } catch (error) {\n      console.log(error.name);\n      console.log(error.message);\n      return null;\n    }\n  }\n\n  //Оголошуємо функцію яка  дозволяє відтворити стан форми, якщо користувач вже вводив дані в неї раніше і ці дані були збережені у локальному сховищі браузера.\n\n  function loadData() {\n    const parsedData = errorData(localStorageKey) || {};\n\n    feedbackFormEL.elements.email.value = parsedData.email || '';\n    feedbackFormEL.elements.message.value = parsedData.message || '';\n  }\n\n  loadData();\n} else {\n  // Обробка випадку, коли локальне сховище не підтримується браузером\n  console.log('Local storage is not supported by your browser.');\n}\n"],"names":["storageFormData","key","value","handleSubmit","event","email","feedbackFormEL","message","localStorageKey","errorData","data","error","loadData","parsedData","formData","userEmail","userMessage"],"mappings":"oDACA,GAAI,OAAO,aAAiB,IAAa,CAyBvC,IAASA,EAAT,SAAyBC,EAAKC,EAAO,CACnC,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAK,CAAC,CAChD,EAGQC,EAAT,SAAsBC,EAAO,CAC3B,MAAMC,EAAQC,EAAe,SAAS,MAAM,MACtCC,EAAUD,EAAe,SAAS,QAAQ,MAG5CD,IAAU,IAAME,IAAY,IAC9B,MAAM,wBAAwB,EAE9BH,EAAM,eAAc,IAEpBA,EAAM,eAAc,EAEpB,QAAQ,IAAI,KAAK,MAAM,aAAa,QAAQI,CAAe,CAAC,CAAC,EAG7D,aAAa,WAAWA,CAAe,EAGvCF,EAAe,MAAK,EAEvB,EAMQG,EAAT,SAAmBR,EAAM,QAAS,CAChC,MAAMS,EAAO,aAAa,QAAQT,CAAG,EACrC,GAAI,CACF,OAAO,KAAK,MAAMS,CAAI,CACvB,OAAQC,EAAO,CACd,eAAQ,IAAIA,EAAM,IAAI,EACtB,QAAQ,IAAIA,EAAM,OAAO,EAClB,IACR,CACF,EAIQC,EAAT,UAAoB,CAClB,MAAMC,EAAaJ,EAAUD,CAAe,GAAK,CAAA,EAEjDF,EAAe,SAAS,MAAM,MAAQO,EAAW,OAAS,GAC1DP,EAAe,SAAS,QAAQ,MAAQO,EAAW,SAAW,EAC/D,EAxED,MAAMC,EAAW,CAAE,MAAO,GAAI,QAAS,EAAE,EAGnCN,EAAkB,sBAGlBF,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,QAAQ,IAAIA,EAAe,QAAQ,EAGnCA,EAAe,iBAAiB,QAAS,IAAM,CAE7C,MAAMS,EAAYT,EAAe,SAAS,MAAM,MAAM,OAChDU,EAAcV,EAAe,SAAS,QAAQ,MAAM,OAE1DQ,EAAS,MAAQC,EACjBD,EAAS,QAAUE,EAEnBhB,EAAgBQ,EAAiBM,CAAQ,CAC7C,CAAG,EA+BDR,EAAe,iBAAiB,SAAUH,CAAY,EAuBtDS,GACF,MAEE,QAAQ,IAAI,iDAAiD"}